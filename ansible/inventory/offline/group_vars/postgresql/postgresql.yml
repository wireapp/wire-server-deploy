# PostgreSQL configuration for all PostgreSQL nodes
postgresql_version: 17
postgresql_data_dir: /var/lib/postgresql/{{ postgresql_version }}/main
postgresql_conf_dir: /etc/postgresql/{{ postgresql_version }}/main

# Replication services configuration
repsvc_user: repsvc
repsvc_password: "securepassword"
repsvc_database: repsvc_db

# Use local packages instead of repository
postgresql_use_repository: false  # Set to true to use local packages from urls

# PostgreSQL package definitions
# When updating the packages, update the checksums too in wire-server-deploy/nix/pkgs/wire-binaries.nix
postgresql_pkgs:
  - name: libpq5
    url: "{{ binaries_url }}/libpq5_17.5-1.pgdg22.04+1_amd64.deb"
    checksum: "sha256:97cec98aa147de384066a027693e5a0864009e2209d170f891cb0d7583735936"
  - name: postgresql-client-common
    url: "{{ binaries_url }}/postgresql-client-common_281.pgdg22.04+1_all.deb"
    checksum: "sha256:c5ee58fea51a19753ac0496d06538c6a194705b11aef27683047e9c4ebff2c5e"
  - name: postgresql-common-dev
    url: "{{ binaries_url }}/postgresql-common-dev_281.pgdg22.04+1_all.deb"
    checksum: "sha256:aa116b0861d149dcba5cbf0cb6af611d9d59bd83178ee9c66c60363ce6cf77d0"
  - name: postgresql-common
    url: "{{ binaries_url }}/postgresql-common_281.pgdg22.04+1_all.deb"
    checksum: "sha256:317308f1eaeb8c3f93fdc3eaa5430290e5bce62b4bba3f78045ff339d6a8e7a1"
  - name: postgresql-client-17
    url: "{{ binaries_url }}/postgresql-client-17_17.5-1.pgdg22.04+1_amd64.deb"
    checksum: "sha256:1b3e96f9f488f234734266a7a212c7c3ac189ba763939a313906e3f2fe5492bb"
  - name: postgresql-17
    url: "{{ binaries_url }}/postgresql-17_17.5-1.pgdg22.04+1_amd64.deb"
    checksum: "sha256:0ba8064cee5800f290485c3974081b399736feca050ad6ae06dd26d2c26cf167"
  - name: python3-psycopg2
    url: "{{ binaries_url }}/python3-psycopg2_2.9.10-1.pgdg22.04+1_amd64.deb"
    checksum: "sha256:cc2f749e3af292a67e012edeb4aa5d284f57f2d66a9a09fe5b81e5ffda73cab4"
